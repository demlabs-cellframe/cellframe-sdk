# –ê–Ω–∞–ª–∏–∑ –ü–æ–∫—Ä—ã—Ç–∏—è CLI –¢–µ—Å—Ç–æ–≤ vs UTXO_BLOCKING_EXAMPLES.md

## üìä –ú–∞—Ç—Ä–∏—Ü–∞ –ü–æ–∫—Ä—ã—Ç–∏—è

### ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–µ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (Basic Usage)

| ‚Ññ | –°—Ü–µ–Ω–∞—Ä–∏–π –∏–∑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---|-------------------------|------|--------|-----------|
| 1.1 | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ —Å UTXO –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π (default) | test_token_decl_with_utxo_flags() | ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û | –¢–µ—Å—Ç —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–∫–µ–Ω —Å —Ñ–ª–∞–≥–∞–º–∏, –Ω–æ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–µ–∑ —Ñ–ª–∞–≥–æ–≤ |
| 1.2 | –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ UTXO (immediate) | test_token_update_utxo_blocked_add() | ‚úÖ –ü–û–ö–†–´–¢–û | –§–æ—Ä–º–∞—Ç `tx_hash:out_idx` |
| 1.3 | –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ UTXO (immediate) | test_token_update_utxo_blocked_remove() | ‚úÖ –ü–û–ö–†–´–¢–û | –§–æ—Ä–º–∞—Ç `tx_hash:out_idx` |
| 1.4 | –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö UTXO | test_token_update_utxo_blocked_clear() | ‚úÖ –ü–û–ö–†–´–¢–û | –ü–∞—Ä–∞–º–µ—Ç—Ä `-utxo_blocked_clear` |
| 1.5 | –ü—Ä–æ—Å–º–æ—Ç—Ä UTXO blocklist (`token info`) | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ö–æ–º–∞–Ω–¥–∞ `token info` –ù–ï —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è |

### ‚úÖ –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è (Delayed Activation & Unblocking)

| ‚Ññ | –°—Ü–µ–Ω–∞—Ä–∏–π | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---|----------|------|--------|-----------|
| 2.1 | –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ | test_token_update_utxo_blocked_add_delayed() | ‚úÖ –ü–û–ö–†–´–¢–û | –§–æ—Ä–º–∞—Ç `tx_hash:out_idx:timestamp` |
| 2.2 | –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (auto-expiration) | test_token_update_utxo_blocked_remove_delayed() | ‚úÖ –ü–û–ö–†–´–¢–û | –§–æ—Ä–º–∞—Ç `tx_hash:out_idx:timestamp` |
| 2.3 | –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä (vesting) | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –î–≤—É—Ö—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è |

### ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –§–ª–∞–≥–∞–º–∏ (Flag Management)

| ‚Ññ | –°—Ü–µ–Ω–∞—Ä–∏–π | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---|----------|------|--------|-----------|
| 3.1 | UTXO_BLOCKING_DISABLED –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ | test_token_decl_with_utxo_flags() | ‚úÖ –ü–û–ö–†–´–¢–û | –í token_decl |
| 3.2 | UTXO_BLOCKING_DISABLED —á–µ—Ä–µ–∑ token_update | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | flag_set –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è |
| 3.3 | STATIC_UTXO_BLOCKLIST | test_token_decl_with_utxo_flags() | ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞, –Ω–æ –ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∑–∞–ø—Ä–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π |
| 3.4 | DISABLE_ADDRESS_SENDER_BLOCKING | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ù–µ –ø–æ–∫—Ä—ã—Ç–æ |
| 3.5 | DISABLE_ADDRESS_RECEIVER_BLOCKING | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ù–µ –ø–æ–∫—Ä—ã—Ç–æ |

### ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Address-Based Blocking

| ‚Ññ | –°—Ü–µ–Ω–∞—Ä–∏–π | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---|----------|------|--------|-----------|
| 4.1 | –ì–∏–±—Ä–∏–¥–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å (UTXO + address) | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ù–µ –ø–æ–∫—Ä—ã—Ç–æ CLI —Ç–µ—Å—Ç–∞–º–∏ |

### ‚úÖ –¢–∏–ø–æ–≤—ã–µ –°–ª—É—á–∞–∏ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (Common Use Cases)

| ‚Ññ | –°—Ü–µ–Ω–∞—Ä–∏–π | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---|----------|------|--------|-----------|
| 5.1 | Vesting / Lock-up –ø–µ—Ä–∏–æ–¥—ã | arbitrage: test_arbitrage_delayed_blocking() | ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û | –ï—Å—Ç—å –≤ arbitrage —Ç–µ—Å—Ç–∞—Ö, –Ω–æ –ù–ï –≤ CLI |
| 5.2 | Escrow —Å–µ—Ä–≤–∏—Å—ã | arbitrage: test_arbitrage_after_unblocking() | ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û | –ï—Å—Ç—å –ª–æ–≥–∏–∫–∞, –Ω–æ –Ω–µ –ø–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π |
| 5.3 | –†–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ù–µ –ø–æ–∫—Ä—ã—Ç–æ |
| 5.4 | Regulatory compliance | arbitrage: test_arbitrage_partial_blocking() | ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û | –ß–∞—Å—Ç–∏—á–Ω–æ –ø–æ–∫—Ä—ã—Ç–æ |
| 5.5 | ICO/IDO —Å STATIC_UTXO_BLOCKLIST | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ UTXO –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É—é—Ç—Å—è |

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫ (Error Handling)

| ‚Ññ | –°—Ü–µ–Ω–∞—Ä–∏–π | –¢–µ—Å—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---|----------|------|--------|-----------|
| 6.1 | Invalid UTXO format | test_invalid_utxo_format() | ‚úÖ –ü–û–ö–†–´–¢–û | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç |
| 6.2 | DAP_LEDGER_TX_CHECK_OUT_ITEM_BLOCKED | arbitrage: test_arbitrage_blocked_by_utxo() | ‚úÖ –ü–û–ö–†–´–¢–û | –í arbitrage —Ç–µ—Å—Ç–∞—Ö |
| 6.3 | STATIC_UTXO_BLOCKLIST enforced | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–ø—ã—Ç–∫–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ immutable —Å–ø–∏—Å–∫–∞ |
| 6.4 | UTXO_BLOCKING_DISABLED is set | - | ‚ùå –ù–ï–¢ –¢–ï–°–¢–ê | –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ |

---

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏–∑ –ü—Ä–æ–±–ª–µ–º

### ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–æ–ø—É—Å–∫–∏

#### 1. **–ù–ï–¢ –¢–ï–°–¢–ê: token info –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ blocklist**
**–°—Ç—Ä–æ–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 78-109

```bash
cellframe-node-cli token info -net mynetwork -name TEST
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç JSON output —Å –ø–æ–ª—è–º–∏:
- `utxo_blocklist_count`
- `utxo_blocklist` (–º–∞—Å—Å–∏–≤ —Å `tx_hash`, `out_idx`, `blocked_time`, `becomes_effective`, `becomes_unblocked`)

**–¢–µ—Å—Ç—ã –ù–ï –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –ß—Ç–æ –∫–æ–º–∞–Ω–¥–∞ `token info` –≤–æ–æ–±—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ß—Ç–æ blocklist –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –ß—Ç–æ –ø–æ–ª—è `becomes_effective` –∏ `becomes_unblocked` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

**–†–∏—Å–∫:** –ï—Å–ª–∏ `token info` —Å–ª–æ–º–∞–µ—Ç—Å—è, —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏ —ç—Ç–æ –ù–ï –æ–±–Ω–∞—Ä—É–∂–∞—Ç!

---

#### 2. **–ù–ï–¢ –¢–ï–°–¢–ê: STATIC_UTXO_BLOCKLIST - –∑–∞–ø—Ä–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π**
**–°—Ç—Ä–æ–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 229-253

```bash
cellframe-node-cli token_decl \
    -flags STATIC_UTXO_BLOCKLIST \
    -utxo_blocked_add 0xabcd...1234:0 \
    -certs owner_cert
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–µ—â–∞–µ—Ç:**
> All subsequent `token_update` operations with `-utxo_blocked_add`, `-utxo_blocked_remove`, or `-utxo_blocked_clear` are **rejected**

**–¢–µ—Å—Ç—ã –ù–ï –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –ß—Ç–æ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `STATIC_UTXO_BLOCKLIST` –Ω–µ–ª—å–∑—è –¥–æ–±–∞–≤–∏—Ç—å UTXO
- –ß—Ç–æ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å UTXO
- –ß—Ç–æ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–µ–ª—å–∑—è –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫

**–†–∏—Å–∫:** –ï—Å–ª–∏ immutability –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç, —ç—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–∞—è security –ø—Ä–æ–±–ª–µ–º–∞!

---

#### 3. **–ù–ï–¢ –¢–ï–°–¢–ê: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ -utxo_blocked_add –ø—Ä–∏ token_decl**
**–°—Ç—Ä–æ–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 244-246

```bash
-utxo_blocked_add 0xabcd...1234:0 \
-utxo_blocked_add 0xef01...5678:1 \
-certs owner_cert
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ** `-utxo_blocked_add` –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ `token_decl`

**–¢–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:** `test_multiple_utxo_operations()` –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π `-utxo_blocked_add` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `token_update`

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å:** –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —ç—Ç–æ –¥–ª—è `token_decl`? –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏!

---

#### 4. **–ù–ï–¢ –¢–ï–°–¢–ê: –í–µ—Å—Ç–∏ ng —Å—Ü–µ–Ω–∞—Ä–∏–π (–¥–≤—É—Ö—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å)**
**–°—Ç—Ä–æ–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 165-188

```bash
# Step 1: Block UTXO immediately
token_update -utxo_blocked_add 0xabcd...1234:0

# Step 2: Schedule automatic unblock after 6 months
token_update -utxo_blocked_remove 0xabcd...1234:0:1715788800
```

**–¢–µ—Å—Ç—ã –ù–ï –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –ú–æ–∂–Ω–æ –ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å delayed unblocking –¥–ª—è **—É–∂–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ** UTXO
- –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: block ‚Üí delayed remove

**–†–∏—Å–∫:** –ï—Å–ª–∏ –≤—Ç–æ—Ä–æ–π —à–∞–≥ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤–µ—Å—å vesting –º–µ—Ö–∞–Ω–∏–∑–º —Å–ª–æ–º–∞–Ω!

---

### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω—ã–µ –ü—Ä–æ–ø—É—Å–∫–∏

#### 5. **–ß–ê–°–¢–ò–ß–ù–û: Default UTXO blocking behaviour**
**–°—Ç—Ä–æ–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 20-35

> UTXO blocking is **enabled by default** for all CF20 tokens. No special flags are needed

**–¢–µ—Å—Ç `test_token_decl_with_utxo_flags()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å `UTXO_BLOCKING_DISABLED`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å `STATIC_UTXO_BLOCKLIST`

**–ù–ï –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ **–±–µ–∑ —Ñ–ª–∞–≥–æ–≤** (default behaviour)
- ‚ùå –ß—Ç–æ UTXO blocking **enabled** –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç:
```c
// Create CF20 without any flags - should have UTXO blocking enabled by default
char *l_argv[] = {
    "-token", "DEFAULT",
    "-type", "CF20",
    // NO -flags parameter!
};
// Verify that UTXO blocking works by default
```

---

#### 6. **–ß–ê–°–¢–ò–ß–ù–û: flag_set —á–µ—Ä–µ–∑ token_update**
**–°—Ç—Ä–æ–∫–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** 212-222

```bash
token_update -flag_set UTXO_BLOCKING_DISABLED
```

**–¢–µ—Å—Ç—ã –ù–ï –ø—Ä–æ–≤–µ—Ä—è—é—Ç:**
- –£—Å—Ç–∞–Ω–æ–≤–∫—É —Ñ–ª–∞–≥–æ–≤ —á–µ—Ä–µ–∑ `token_update` (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `token_decl`)
- –ß—Ç–æ —Ñ–ª–∞–≥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ß—Ç–æ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–ª–∞–≥–∞ blocklist –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è

---

## üéØ –ë—É–¥—É—Ç –ª–∏ –¢–µ—Å—Ç—ã –ü–∞–¥–∞—Ç—å –ø—Ä–∏ –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏?

### ‚úÖ –¢–µ—Å—Ç—ã –£–ü–ê–î–£–¢ –µ—Å–ª–∏:

1. **–ü–∞—Ä—Å–∏–Ω–≥ UTXO —Ñ–æ—Ä–º–∞—Ç–∞ —Å–ª–æ–º–∞–µ—Ç—Å—è**
   - `test_invalid_utxo_format()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—à–∏–±–∫–∏
   - `test_token_update_utxo_blocked_add()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç

2. **TSD —Å–µ–∫—Ü–∏–∏ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è**
   - –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç `"placed in datum pool"` –≤ output
   - –ï—Å–ª–∏ TSD –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è, –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É

3. **Ledger –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ UTXO**
   - `test_arbitrage_blocked_by_utxo()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `dap_assert_PIF(l_add_ret == DAP_LEDGER_TX_CHECK_OUT_ITEM_BLOCKED)`
   - –ï—Å–ª–∏ ledger –ù–ï –æ—Ç–≤–µ—Ä–≥–∞–µ—Ç, —Ç–µ—Å—Ç —É–ø–∞–¥—ë—Ç

4. **Delayed activation –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - `test_arbitrage_delayed_blocking()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –î–û –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
   - –ï—Å–ª–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Å—Ä–∞–∑—É, —Ç–µ—Å—Ç —É–ø–∞–¥—ë—Ç

### ‚ùå –¢–µ—Å—Ç—ã –ù–ï –£–ü–ê–î–£–¢ –µ—Å–ª–∏:

1. **`token info` –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç blocklist**
   - –ù–µ—Ç —Ç–µ—Å—Ç–∞ –¥–ª—è `token info`

2. **STATIC_UTXO_BLOCKLIST –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (immutability —Å–ª–æ–º–∞–Ω–∞)**
   - –ù–µ—Ç —Ç–µ—Å—Ç–∞ –¥–ª—è –ø–æ–ø—ã—Ç–∫–∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ immutable —Å–ø–∏—Å–∫–∞

3. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `-utxo_blocked_add` –≤ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è**
   - `test_multiple_utxo_operations()` —Ç–æ–ª—å–∫–æ **–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç** –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

4. **Vesting —Å—Ü–µ–Ω–∞—Ä–∏–π (block ‚Üí delayed remove) –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –ù–µ—Ç —Ç–µ—Å—Ç–∞ –¥–ª—è –¥–≤—É—Ö—à–∞–≥–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

5. **Default UTXO blocking –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è**
   - –ù–µ—Ç —Ç–µ—Å—Ç–∞ –¥–ª—è token_decl –±–µ–∑ —Ñ–ª–∞–≥–æ–≤

6. **`flag_set` —á–µ—Ä–µ–∑ `token_update` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –ù–µ—Ç —Ç–µ—Å—Ç–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–ª–∞–≥–æ–≤

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

1. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è `token info`**
   ```c
   test_token_info_shows_blocklist()
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è STATIC_UTXO_BLOCKLIST enforcement**
   ```c
   test_static_utxo_blocklist_rejects_modifications()
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è vesting —Å—Ü–µ–Ω–∞—Ä–∏—è**
   ```c
   test_vesting_scenario_block_then_delayed_remove()
   ```

4. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è default UTXO blocking**
   ```c
   test_token_decl_default_utxo_blocking_enabled()
   ```

### üü° –í–∞–∂–Ω—ã–µ –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è (–ñ–ï–õ–ê–¢–ï–õ–¨–ù–û)

5. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö `-utxo_blocked_add` –≤ token_decl**
   ```c
   test_token_decl_multiple_utxo_additions()
   ```

6. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è `flag_set` —á–µ—Ä–µ–∑ `token_update`**
   ```c
   test_token_update_flag_set_utxo_blocking_disabled()
   ```

7. **–î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç –¥–ª—è –≥–∏–±—Ä–∏–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è (UTXO + address)**
   ```c
   test_hybrid_utxo_and_address_blocking()
   ```

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π –°—á—ë—Ç –ü–æ–∫—Ä—ã—Ç–∏—è

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ | –ü–æ–∫—Ä—ã—Ç–æ –¢–µ—Å—Ç–∞–º–∏ | % –ü–æ–∫—Ä—ã—Ç–∏—è |
|-----------|--------------------------|----------------|------------|
| Basic Usage | 5 | 4 | 80% |
| Delayed Activation | 3 | 2 | 67% |
| Flag Management | 5 | 2 | 40% |
| Integration | 1 | 0 | 0% |
| Use Cases | 5 | 2 | 40% |
| Error Handling | 4 | 2 | 50% |
| **–ò–¢–û–ì–û** | **23** | **12** | **52%** |

### –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –û—Ü–µ–Ω–∫–∞

- ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ CLI –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:** –•–û–†–û–®–û (80%)
- ‚ö†Ô∏è **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è:** –°–†–ï–î–ù–ï (40%)
- ‚ùå **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:** –ü–õ–û–•–û (20%)

---

## üö® –í—ã–≤–æ–¥

### –ë—É–¥—É—Ç –ª–∏ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—Ç—å?

**–û—Ç–≤–µ—Ç: –ß–ê–°–¢–ò–ß–ù–û**

‚úÖ **–£–ø–∞–¥—É—Ç –ø—Ä–∏:**
- –ü–æ–ª–æ–º–∫–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ UTXO —Ñ–æ—Ä–º–∞—Ç–∞
- –ü–æ–ª–æ–º–∫–µ ledger –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º TSD —Å–æ–∑–¥–∞–Ω–∏–∏

‚ùå **–ù–ï —É–ø–∞–¥—É—Ç –ø—Ä–∏:**
- –ü–æ–ª–æ–º–∫–µ `token info`
- –ü–æ–ª–æ–º–∫–µ STATIC_UTXO_BLOCKLIST enforcement
- –ü—Ä–æ–±–ª–µ–º–∞—Ö —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ UTXO –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- –ü–æ–ª–æ–º–∫–µ vesting —Å—Ü–µ–Ω–∞—Ä–∏—è
- –ü—Ä–æ–±–ª–µ–º–∞—Ö —Å default behaviour

### –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å

üî¥ **–ö–†–ò–¢–ò–ß–ù–û:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–∞ –¥–ª—è STATIC_UTXO_BLOCKLIST - —ç—Ç–æ security —Ä–∏—Å–∫!

üü° **–í–ê–ñ–ù–û:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–∞ –¥–ª—è `token info` - —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏ –Ω–µ —Å–º–æ–≥—É—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å UI

üü¢ **–ù–ï–ö–†–ò–¢–ò–ß–ù–û:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è use cases - —ç—Ç–æ –ø—Ä–∏–º–µ—Ä—ã, –Ω–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

---

## ‚úÖ –ß—Ç–æ –°–¥–µ–ª–∞–Ω–æ –ü–†–ê–í–ò–õ–¨–ù–û

1. ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ CLI –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–∞—Ä—Å—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚úÖ Error handling –¥–ª—è invalid —Ñ–æ—Ä–º–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚úÖ Arbitrage —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç ledger –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
4. ‚úÖ Delayed activation/unblocking –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
5. ‚úÖ –ö–æ–¥ –±–µ–∑ linter –æ—à–∏–±–æ–∫

## ‚ùå –ß—Ç–æ –ù—É–∂–Ω–æ –ò–°–ü–†–ê–í–ò–¢–¨

1. ‚ùå –î–æ–±–∞–≤–∏—Ç—å test –¥–ª—è `token info`
2. ‚ùå –î–æ–±–∞–≤–∏—Ç—å test –¥–ª—è STATIC_UTXO_BLOCKLIST enforcement
3. ‚ùå –î–æ–±–∞–≤–∏—Ç—å test –¥–ª—è vesting —Å—Ü–µ–Ω–∞—Ä–∏—è
4. ‚ùå –î–æ–±–∞–≤–∏—Ç—å test –¥–ª—è default behaviour
5. ‚ùå –£—Ç–æ—á–Ω–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö `-utxo_blocked_add`

