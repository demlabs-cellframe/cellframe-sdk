# Simple Wallet - –ü—Ä–æ—Å—Ç–æ–π –∫–æ—à–µ–ª–µ–∫ CellFrame SDK

–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ –≤ CellFrame SDK. –ü—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏ –∏ –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

## –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –°–±–æ—Ä–∫–∞

```bash
# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–º–µ—Ä–∞
cd cellframe-sdk/docs/examples/simple_wallet

# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–±–æ—Ä–∫–∏
mkdir build && cd build

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
cmake .. -DCMAKE_BUILD_TYPE=Release

# –°–±–æ—Ä–∫–∞
make
```

### –ó–∞–ø—É—Å–∫

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–º–µ—Ä–∞
./simple_wallet
```

## –ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–º–µ—Ä

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è SDK** - –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –∫–ª—é—á–∞–º–∏
- ‚úÖ **–†–∞–±–æ—Ç–∞ —Å –∞–¥—Ä–µ—Å–∞–º–∏** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
- ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª—é—á–∞—Ö** - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–ª—é—á–∞—Ö –∫–æ—à–µ–ª—å–∫–∞
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
- **–ú–æ–¥—É–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Resource management** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- **Graceful shutdown** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
simple_wallet/
‚îú‚îÄ‚îÄ CMakeLists.txt     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ README.md         # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ main.c           # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–º–µ—Ä–∞
```

## –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (main.c)

```c
#include "dap_common.h"
#include "dap_chain_wallet.h"
#include "dap_enc_key.h"

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DAP SDK
int init_result = dap_common_init("simple_wallet", NULL);
if (init_result != 0) {
    return EXIT_FAILURE;
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è wallet –º–æ–¥—É–ª—è
if (dap_chain_wallet_init() != 0) {
    dap_common_deinit();
    return EXIT_FAILURE;
}

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞ –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞
dap_enc_key_t *key = dap_enc_key_new(DAP_ENC_KEY_TYPE_SIG_ECDSA);
dap_enc_key_generate(key);

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
dap_chain_wallet_t *wallet = dap_chain_wallet_create(
    "my_wallet", ".", DAP_ENC_KEY_TYPE_SIG_ECDSA, NULL);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
dap_chain_addr_t *wallet_addr = dap_chain_wallet_get_addr(wallet, 0);

// –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
DAP_FREE(wallet_addr);
dap_chain_wallet_close(wallet);
dap_enc_key_delete(key);
dap_chain_wallet_deinit();
dap_common_deinit();
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
- CellFrame SDK (–æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏)
- DAP Core (–±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- DAP Common (–æ–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã)
- DAP Crypto (–∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è)
- DAP Chain (–±–ª–æ–∫—á–µ–π–Ω —Ñ—É–Ω–∫—Ü–∏–∏)
- DAP Wallet (—Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—à–µ–ª—å–∫–∞)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ
- CMake 3.10+ (–¥–ª—è —Å–±–æ—Ä–∫–∏)

## –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥

```
CellFrame SDK Simple Wallet Example
===================================

Initializing DAP SDK...
‚úì DAP SDK initialized successfully

Initializing wallet module...
‚úì Wallet module initialized successfully

Creating new wallet...
‚úì Wallet created successfully

Getting wallet address...
‚úì Wallet address: CELLXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

Wallet key information:
  Key count: 1
  Key type: 26
  ‚úì Key retrieved successfully

Shutting down...
‚úì Shutdown completed successfully

Example completed successfully!
You can now explore more advanced CellFrame SDK wallet features.
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
```c
// –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞
uint256_t balance = dap_chain_wallet_get_balance(wallet, net_id, "CELL");
char *balance_str = dap_chain_balance_to_coins_uint64(balance);
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ balance_str...
free(balance_str);
```

### –†–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
```c
// –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç compose –º–æ–¥—É–ª—è)
compose_config_t config = {
    .net_name = "Backbone",
    .url_str = "http://rpc.cellframe.net",
    .port = 8081
};

json_object *tx = dap_tx_create_compose(
    "Backbone", "CELL", "100.0", "0.001",
    recipient_addr, wallet_addr,
    config.url_str, config.port, NULL
);
```

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞
```c
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
if (dap_chain_wallet_save(wallet, "mypassword") != 0) {
    fprintf(stderr, "Failed to save wallet\n");
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ—à–µ–ª—å–∫–∞
dap_chain_wallet_t *loaded_wallet = dap_chain_wallet_open(
    "my_wallet", ".", "mypassword"
);
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
```
ERROR: Failed to initialize DAP SDK
```
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ CellFrame SDK –ø—Ä–∞–≤–∏–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

### –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
```
ERROR: Failed to create wallet
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –∫–æ—à–µ–ª—å–∫–∞.

### –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∞–¥—Ä–µ—Å–∞
```
ERROR: Failed to get wallet address
```
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ—à–µ–ª–µ–∫ –±—ã–ª —Å–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–∏.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–∑—É—á–∏—Ç–µ –¥—Ä—É–≥–∏–µ –ø—Ä–∏–º–µ—Ä—ã:**
   - `hello_cellframe/` - –±–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SDK
   - `complex_wallet/` - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—à–µ–ª—å–∫–∞

2. **–û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:**
   - `docs/modules/wallet.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è wallet –º–æ–¥—É–ª—è
   - `docs/modules/compose.md` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
   - `docs/modules/common.md` - –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

3. **–†–∞–∑—Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä –∫–∞–∫ –æ—Å–Ω–æ–≤—É
   - –î–æ–±–∞–≤—å—Ç–µ —Ç—Ä–µ–±—É–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
   - –°–ª–µ–¥—É–π—Ç–µ –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

**–≠—Ç–æ—Ç –ø—Ä–∏–º–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–ª–∏—á–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–Ω–æ–π —Ç–æ—á–∫–æ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ CellFrame SDK! üöÄ**



