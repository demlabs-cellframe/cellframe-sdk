# üß™ –ü–û–õ–ù–ê–Ø –°–ü–ï–¶–ò–§–ò–ö–ê–¶–ò–Ø –¢–ï–°–¢–û–í –ë–ò–õ–õ–ò–ù–ì–û–í–û–ì–û –ú–û–î–£–õ–Ø

## üìã **–û–ë–ó–û–† –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø**

**–¶–µ–ª—å:** –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –∞—Å–ø–µ–∫—Ç–æ–≤ –±–∏–ª–ª–∏–Ω–≥–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- **–ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã:** 43 —Ç–µ—Å—Ç–∞ (< 100ms –∫–∞–∂–¥—ã–π)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:** 28 —Ç–µ—Å—Ç–æ–≤ (< 1s –∫–∞–∂–¥—ã–π)
- **–°—Ç—Ä–µ—Å—Å —Ç–µ—Å—Ç—ã:** 15 —Ç–µ—Å—Ç–æ–≤ (–ø–µ—Ä–µ–º–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è)
- **–¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 12 —Ç–µ—Å—Ç–æ–≤ (–±–µ–Ω—á–º–∞—Ä–∫–∏)
- **–î–æ–ª–≥–∏–µ —Ç–µ—Å—Ç—ã:** 8 —Ç–µ—Å—Ç–æ–≤ (> 10s)

---

## üöÄ **–ö–ê–¢–ï–ì–û–†–ò–Ø 1: –¢–ï–°–¢–´ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–ò (5 —Ç–µ—Å—Ç–æ–≤)**

### **1.1 –ë–ê–ó–û–í–ê–Ø –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø**

#### **test_billing_init_success()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –±–∏–ª–ª–∏–Ω–≥–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è  
**–ö–∞—Ç–µ–≥–æ—Ä–∏—è:** FAST  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
- –ß–∏—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –í–´–ó–û–í: dap_stream_ch_chain_net_srv_init(service)
2. –ü–†–û–í–ï–†–ö–ê: return code == 0
3. –ü–†–û–í–ï–†–ö–ê: Memory Manager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
4. –ü–†–û–í–ï–†–ö–ê: grace_mutex —Å–æ–∑–¥–∞–Ω
5. –ü–†–û–í–ï–†–ö–ê: channel processor –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
6. –û–ß–ò–°–¢–ö–ê: dap_stream_ch_chain_net_srv_deinit()
```
**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

#### **test_billing_init_memory_manager_fail()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±–æ—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Memory Manager  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. MOCK: dap_billing_memory_manager_init() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç -1
2. –í–´–ó–û–í: dap_stream_ch_chain_net_srv_init(service)
3. –ü–†–û–í–ï–†–ö–ê: return code == -1
4. –ü–†–û–í–ï–†–ö–ê: —Å–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —á–∏—Å—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
```

---

## üíæ **–ö–ê–¢–ï–ì–û–†–ò–Ø 2: –¢–ï–°–¢–´ MEMORY MANAGER (8 —Ç–µ—Å—Ç–æ–≤)**

### **2.1 –ë–ê–ó–û–í–û–ï –£–ü–†–ê–í–õ–ï–ù–ò–ï –ü–ê–ú–Ø–¢–¨–Æ**

#### **test_memory_allocation_basic()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
size_t allocation_size = 1024;
resource_type = DAP_MEMORY_RESOURCE_GRACE_OBJECT;
context = "test_allocation";
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø: dap_billing_memory_manager_init()
2. –í–´–î–ï–õ–ï–ù–ò–ï: ptr = dap_billing_memory_alloc(1024, GRACE_OBJECT, "test")
3. –ü–†–û–í–ï–†–ö–ê: ptr != NULL
4. –ü–†–û–í–ï–†–ö–ê: –ø–∞–º—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏
5. –û–°–í–û–ë–û–ñ–î–ï–ù–ò–ï: result = dap_billing_memory_free(ptr, "test_free")
6. –ü–†–û–í–ï–†–ö–ê: result == DAP_MEMORY_MANAGER_SUCCESS
7. –û–ß–ò–°–¢–ö–ê: dap_billing_memory_manager_deinit()
```
**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- –ü–∞–º—è—Ç—å –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –î–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å/—á–∏—Ç–∞—Ç—å
- –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

#### **test_memory_double_free_protection()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –í–´–î–ï–õ–ï–ù–ò–ï: ptr = dap_billing_memory_alloc(512, GRACE_OBJECT, "double_free_test")
2. –ü–ï–†–í–û–ï –û–°–í–û–ë–û–ñ–î–ï–ù–ò–ï: result1 = dap_billing_memory_free(ptr, "first_free")
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: result1 == SUCCESS
3. –í–¢–û–†–û–ï –û–°–í–û–ë–û–ñ–î–ï–ù–ò–ï: result2 = dap_billing_memory_free(ptr, "second_free")
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: result2 != SUCCESS
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: —Å–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π
   ‚îî‚îÄ –ü–†–û–í–ï–†–ö–ê: –Ω–µ—Ç –∞–≤–∞—Ä–∏–π–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
```

### **2.2 GRACE OBJECT FACTORY**

#### **test_grace_object_factory_basic()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ grace –æ–±—ä–µ–∫—Ç–æ–≤  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–î–ì–û–¢–û–í–ö–ê: usage –æ–±—ä–µ–∫—Ç (mock)
2. –°–û–ó–î–ê–ù–ò–ï: grace_item = dap_billing_grace_item_create_safe(&usage, "test_create")
3. –ü–†–û–í–ï–†–ö–ê: grace_item != NULL
4. –ü–†–û–í–ï–†–ö–ê: grace_item –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
5. –ü–†–û–í–ï–†–ö–ê: reference count == 1
6. –£–ù–ò–ß–¢–û–ñ–ï–ù–ò–ï: result = dap_billing_grace_item_destroy_safe(grace_item, "test_destroy")
7. –ü–†–û–í–ï–†–ö–ê: result == SUCCESS
```

---

## ‚è±Ô∏è **–ö–ê–¢–ï–ì–û–†–ò–Ø 3: –¢–ï–°–¢–´ TIMER UTILS (6 —Ç–µ—Å—Ç–æ–≤)**

### **3.1 –°–û–ó–î–ê–ù–ò–ï –ò –£–î–ê–õ–ï–ù–ò–ï –¢–ê–ô–ú–ï–†–û–í**

#### **test_timer_create_safe_basic()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
worker = mock_worker;
timeout_ms = 1000;
callback = test_callback_function;
callback_arg = test_data;
context = "timer_test";
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–û–ó–î–ê–ù–ò–ï: timer = dap_billing_timer_create_safe(worker, 1000, callback, arg)
2. –ü–†–û–í–ï–†–ö–ê: timer != NULL
3. –ü–†–û–í–ï–†–ö–ê: timer->timeout == 1000
4. –ü–†–û–í–ï–†–ö–ê: timer->callback —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
5. –ü–†–û–í–ï–†–ö–ê: timer –∞–∫—Ç–∏–≤–µ–Ω
6. –£–î–ê–õ–ï–ù–ò–ï: dap_billing_timer_delete_safe(timer)
7. –ü–†–û–í–ï–†–ö–ê: timer –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–¥–∞–ª–µ–Ω
```

#### **test_grace_timer_management()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–π–º–µ—Ä–∞–º–∏ –≤ grace –æ–±—ä–µ–∫—Ç–∞—Ö  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–û–ó–î–ê–ù–ò–ï GRACE: grace_item —Å mock usage
2. –°–û–ó–î–ê–ù–ò–ï –¢–ê–ô–ú–ï–†–ê: result = dap_billing_grace_timer_create_safe(grace_item, 5000)
3. –ü–†–û–í–ï–†–ö–ê: result == true
4. –ü–†–û–í–ï–†–ö–ê: grace_item->grace->timer != NULL
5. –ü–†–û–í–ï–†–ö–ê: —Ç–∞–π–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
6. –û–ß–ò–°–¢–ö–ê: dap_billing_grace_timer_cleanup_safe(grace_item)
7. –ü–†–û–í–ï–†–ö–ê: grace_item->grace->timer == NULL
```

---

## üéØ **–ö–ê–¢–ï–ì–û–†–ò–Ø 4: –¢–ï–°–¢–´ USAGE MANAGER (9 —Ç–µ—Å—Ç–æ–≤)**

### **4.1 –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø USAGE**

#### **test_usage_init_basic()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ë–∞–∑–æ–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è usage –æ–±—ä–µ–∫—Ç–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–î–ì–û–¢–û–í–ö–ê: usage –æ–±—ä–µ–∫—Ç
2. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø: result = dap_billing_usage_init_safe(&usage)
3. –ü–†–û–í–ï–†–ö–ê: result == DAP_USAGE_MANAGER_SUCCESS
4. –ü–†–û–í–ï–†–ö–ê: usage —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
5. –ü–†–û–í–ï–†–ö–ê: rwlock –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
6. –û–ß–ò–°–¢–ö–ê: dap_billing_usage_cleanup_safe(&usage)
```

### **4.2 –£–ü–†–ê–í–õ–ï–ù–ò–ï GRACE PERIODS**

#### **test_usage_grace_lifecycle()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª grace –≤ usage  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
usage –æ–±—ä–µ–∫—Ç (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π);
tx_cond_hash = {0x12, 0x34, ...};
timeout_seconds = 60;
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–û–ó–î–ê–ù–ò–ï GRACE:
   ‚îú‚îÄ result = dap_billing_usage_grace_create_safe(&usage, &tx_hash, 60)
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: result == SUCCESS
   ‚îî‚îÄ –ü–†–û–í–ï–†–ö–ê: grace –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –∏ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ usage

2. –ü–†–û–í–ï–†–ö–ê –°–û–°–¢–û–Ø–ù–ò–Ø:
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: grace hash table —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–ø–∏—Å—å
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: —Ç–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω
   ‚îî‚îÄ –ü–†–û–í–ï–†–ö–ê: usage –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ GRACE

3. –û–ß–ò–°–¢–ö–ê GRACE:
   ‚îú‚îÄ result = dap_billing_usage_grace_cleanup_safe(&usage, &tx_hash)
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: result == SUCCESS
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: grace —É–¥–∞–ª–µ–Ω –∏–∑ hash table
   ‚îî‚îÄ –ü–†–û–í–ï–†–ö–ê: —Ç–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

---

## üîÑ **–ö–ê–¢–ï–ì–û–†–ò–Ø 5: –¢–ï–°–¢–´ –°–û–°–¢–û–Ø–ù–ò–ô –ò –ü–ï–†–ï–•–û–î–û–í (12 —Ç–µ—Å—Ç–æ–≤)**

### **5.1 –û–°–ù–û–í–ù–´–ï –ü–ï–†–ï–•–û–î–´ –°–û–°–¢–û–Ø–ù–ò–ô**

#### **test_state_idle_to_grace()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Ö–æ–¥ IDLE ‚Üí GRACE –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ ledger  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
usage –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ IDLE;
tx_cond_hash –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ ledger;
grace_timeout_sec = 60;
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ù–ê–ß–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï:
   ‚îú‚îÄ usage->service_state == IDLE
   ‚îú‚îÄ usage->service_substate == IDLE
   ‚îî‚îÄ usage->tx_cond_hash —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

2. MOCK LEDGER:
   ‚îú‚îÄ dap_ledger_tx_find_by_hash() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç NULL
   ‚îî‚îÄ –∏–º–∏—Ç–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

3. –í–´–ó–û–í –§–£–ù–ö–¶–ò–ò:
   ‚îú‚îÄ s_service_substate_go_to_waiting_prev_tx(usage)
   
4. –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê:
   ‚îú‚îÄ usage->service_substate == WAITING_PREV_TX_IN_LEDGER
   ‚îú‚îÄ grace –ø–µ—Ä–∏–æ–¥ —Å–æ–∑–¥–∞–Ω
   ‚îú‚îÄ —Ç–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
   ‚îú‚îÄ grace –æ–±—ä–µ–∫—Ç –≤ hash table
   ‚îî‚îÄ usage —Å–≤—è–∑–∞–Ω —Å grace
```

#### **test_state_grace_to_normal_on_tx_found()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ—Ö–æ–¥ GRACE ‚Üí NORMAL –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–î–ì–û–¢–û–í–ö–ê GRACE –°–û–°–¢–û–Ø–ù–ò–Ø:
   ‚îú‚îÄ usage –≤ GRACE —Ä–µ–∂–∏–º–µ
   ‚îú‚îÄ –∞–∫—Ç–∏–≤–Ω—ã–π grace –ø–µ—Ä–∏–æ–¥
   ‚îî‚îÄ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —Ç–∞–π–º–µ—Ä

2. –ò–ú–ò–¢–ê–¶–ò–Ø –ü–û–Ø–í–õ–ï–ù–ò–Ø –¢–†–ê–ù–ó–ê–ö–¶–ò–ò:
   ‚îú‚îÄ MOCK: dap_ledger_tx_find_by_hash() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç valid tx
   ‚îú‚îÄ –í–´–ó–û–í: dap_stream_ch_chain_net_srv_tx_cond_added_cb_mt()
   
3. –ü–†–û–í–ï–†–ö–ê –ü–ï–†–ï–•–û–î–ê:
   ‚îú‚îÄ grace –ø–µ—Ä–∏–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω
   ‚îú‚îÄ —Ç–∞–π–º–µ—Ä –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   ‚îú‚îÄ usage->service_substate == NORMAL
   ‚îú‚îÄ service callback –≤—ã–∑–≤–∞–Ω
   ‚îî‚îÄ tx_cond —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ usage
```

### **5.2 –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ß–ù–´–• –°–û–°–¢–û–Ø–ù–ò–ô**

#### **test_state_error_handling()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ—á–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ò–ú–ò–¢–ê–¶–ò–Ø –û–®–ò–ë–ö–ò:
   ‚îú‚îÄ grace —Ç–∞–π–º–µ—Ä –∏—Å—Ç–µ–∫
   ‚îú‚îÄ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
   ‚îî‚îÄ dap_billing_grace_period_finish() –≤—ã–∑–≤–∞–Ω

2. –ü–†–û–í–ï–†–ö–ê ERROR –°–û–°–¢–û–Ø–ù–ò–Ø:
   ‚îú‚îÄ usage->service_substate == ERROR
   ‚îú‚îÄ usage->last_err_code —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   ‚îú‚îÄ service callback —Å –æ—à–∏–±–∫–æ–π –≤—ã–∑–≤–∞–Ω
   ‚îî‚îÄ —Ä–µ—Å—É—Ä—Å—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—á–∏—â–µ–Ω—ã
```

---

## üì¶ **–ö–ê–¢–ï–ì–û–†–ò–Ø 6: –¢–ï–°–¢–´ –ü–ê–ö–ï–¢–û–í –ò –ü–†–û–¢–û–ö–û–õ–ê (8 —Ç–µ—Å—Ç–æ–≤)**

### **6.1 –û–ë–†–ê–ë–û–¢–ö–ê –í–•–û–î–Ø–©–ò–• –ü–ê–ö–ï–¢–û–í**

#### **test_packet_request_processing()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–∫–µ—Ç–∞ REQUEST –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
packet_type = DAP_STREAM_CH_CHAIN_NET_SRV_PKT_TYPE_REQUEST;
packet_data = {
    .version = 1,
    .usage_id = 12345,
    .tx_cond_hash = valid_hash,
    .service_uid = vpn_service_uid
};
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–î–ì–û–¢–û–í–ö–ê MOCK:
   ‚îú‚îÄ Mock service –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
   ‚îú‚îÄ Mock client channel
   ‚îî‚îÄ Mock stream session

2. –û–¢–ü–†–ê–í–ö–ê –ü–ê–ö–ï–¢–ê:
   ‚îú‚îÄ s_stream_ch_packet_in(ch, packet)
   
3. –ü–†–û–í–ï–†–ö–ê –û–ë–†–ê–ë–û–¢–ö–ò:
   ‚îú‚îÄ usage –æ–±—ä–µ–∫—Ç —Å–æ–∑–¥–∞–Ω
   ‚îú‚îÄ –∫–ª–∏–µ–Ω—Ç —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω
   ‚îú‚îÄ service_start –≤—ã–∑–≤–∞–Ω
   ‚îú‚îÄ response –ø–∞–∫–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
   ‚îî‚îÄ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
```

#### **test_packet_sign_response()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ receipt –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–î–ì–û–¢–û–í–ö–ê:
   ‚îú‚îÄ usage –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏
   ‚îú‚îÄ receipt –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–ª–∏–µ–Ω—Ç—É
   ‚îî‚îÄ mock –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π receipt –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞

2. –ü–û–õ–£–ß–ï–ù–ò–ï –ü–û–î–ü–ò–°–ò:
   ‚îú‚îÄ packet_type = SIGN
   ‚îú‚îÄ signed_receipt –≤ packet_data
   
3. –ü–†–û–í–ï–†–ö–ê –û–ë–†–ê–ë–û–¢–ö–ò:
   ‚îú‚îÄ –ø–æ–¥–ø–∏—Å—å –≤–∞–ª–∏–¥–Ω–∞
   ‚îú‚îÄ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞
   ‚îú‚îÄ usage –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   ‚îî‚îÄ –ø–ª–∞—Ç–µ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω
```

---

## ‚è∞ **–ö–ê–¢–ï–ì–û–†–ò–Ø 7: –¢–ï–°–¢–´ GRACE PERIODS (10 —Ç–µ—Å—Ç–æ–≤)**

### **7.1 –ë–ê–ó–û–í–´–ï GRACE PERIODS**

#### **test_grace_initial_period()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ù–∞—á–∞–ª—å–Ω—ã–π grace –ø–µ—Ä–∏–æ–¥ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–∏—Å–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–¢–ê–†–¢ –°–ï–†–í–ò–°–ê:
   ‚îú‚îÄ REQUEST –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
   ‚îú‚îÄ tx_cond_hash –Ω–µ –≤ ledger
   ‚îî‚îÄ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ grace

2. GRACE –ü–ï–†–ò–û–î:
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: grace —Å–æ–∑–¥–∞–Ω
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: —Ç–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ 60 —Å–µ–∫
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: usage –≤ WAITING_PREV_TX —Å–æ—Å—Ç–æ—è–Ω–∏–∏
   ‚îî‚îÄ –ü–†–û–í–ï–†–ö–ê: service callback –ù–ï –≤—ã–∑–≤–∞–Ω

3. –ò–ú–ò–¢–ê–¶–ò–Ø –ü–û–Ø–í–õ–ï–ù–ò–Ø TX:
   ‚îú‚îÄ MOCK: tx –ø–æ—è–≤–∏–ª—Å—è –≤ ledger
   ‚îú‚îÄ –í–´–ó–û–í: tx notification callback
   
4. –ó–ê–í–ï–†–®–ï–ù–ò–ï GRACE:
   ‚îú‚îÄ grace –ø–µ—Ä–∏–æ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω
   ‚îú‚îÄ service callback –≤—ã–∑–≤–∞–Ω
   ‚îú‚îÄ usage –≤ NORMAL —Å–æ—Å—Ç–æ—è–Ω–∏–∏
   ‚îî‚îÄ —Å–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–µ–Ω
```

#### **test_grace_repeated_period()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–≤—Ç–æ—Ä–Ω—ã–π grace –ø—Ä–∏ –Ω–æ–≤–æ–º –ø–ª–∞—Ç–µ–∂–µ  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ù–û–†–ú–ê–õ–¨–ù–ê–Ø –†–ê–ë–û–¢–ê:
   ‚îú‚îÄ usage –≤ NORMAL —Å–æ—Å—Ç–æ—è–Ω–∏–∏
   ‚îú‚îÄ –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è
   ‚îî‚îÄ –≤—Ä–µ–º—è –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞

2. –ù–û–í–´–ô –ü–õ–ê–¢–ï–ñ:
   ‚îú‚îÄ receipt —Å–æ–∑–¥–∞–Ω
   ‚îú‚îÄ –Ω–æ–≤—ã–π tx_cond_hash
   ‚îî‚îÄ tx –Ω–µ –≤ ledger

3. –ü–û–í–¢–û–†–ù–´–ô GRACE:
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: –Ω–æ–≤—ã–π grace —Å–æ–∑–¥–∞–Ω
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É
   ‚îú‚îÄ –ü–†–û–í–ï–†–ö–ê: grace —Ç–∞–π–º–µ—Ä –∑–∞–ø—É—â–µ–Ω
   ‚îî‚îÄ –ü–†–û–í–ï–†–ö–ê: usage –≤ WAITING_NEW_TX —Å–æ—Å—Ç–æ—è–Ω–∏–∏
```

### **7.2 –¢–ê–ô–ú–ê–£–¢–´ GRACE PERIODS**

#### **test_grace_timeout_initial()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–∞–π–º–∞—É—Ç –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ grace –ø–µ—Ä–∏–æ–¥–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–û–ó–î–ê–ù–ò–ï GRACE: –Ω–∞—á–∞–ª—å–Ω—ã–π grace –ø–µ—Ä–∏–æ–¥
2. –ò–ú–ò–¢–ê–¶–ò–Ø –¢–ê–ô–ú–ê–£–¢–ê:
   ‚îú‚îÄ –≤—Ä–µ–º—è grace –∏—Å—Ç–µ–∫–ª–æ
   ‚îú‚îÄ tx –Ω–µ –ø–æ—è–≤–∏–ª—Å—è –≤ ledger
   ‚îî‚îÄ dap_billing_grace_period_finish() –≤—ã–∑–≤–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

3. –ü–†–û–í–ï–†–ö–ê –†–ï–ó–£–õ–¨–¢–ê–¢–ê:
   ‚îú‚îÄ usage->service_substate == ERROR
   ‚îú‚îÄ error_code == TX_COND_NOT_FOUND
   ‚îú‚îÄ service –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   ‚îú‚îÄ grace —É–¥–∞–ª–µ–Ω –∏–∑ hash table
   ‚îî‚îÄ —Ä–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã
```

#### **test_grace_timeout_repeated()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –¢–∞–π–º–∞—É—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ grace –ø–µ—Ä–∏–æ–¥–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–í–¢–û–†–ù–´–ô GRACE: –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å + –Ω–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂
2. –¢–ê–ô–ú–ê–£–¢ GRACE:
   ‚îú‚îÄ –Ω–æ–≤—ã–π tx –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
   ‚îî‚îÄ grace —Ç–∞–π–º–µ—Ä –∏—Å—Ç–µ–∫

3. –†–ï–ó–£–õ–¨–¢–ê–¢:
   ‚îú‚îÄ —Å–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
   ‚îú‚îÄ –Ω–æ–≤—ã–π grace —É–¥–∞–ª–µ–Ω
   ‚îú‚îÄ usage –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
   ‚îî‚îÄ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –≤—ã—á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞
```

---

## üí∞ **–ö–ê–¢–ï–ì–û–†–ò–Ø 8: –¢–ï–°–¢–´ –ü–õ–ê–¢–ï–ñ–ï–ô –ò –¢–†–ê–ù–ó–ê–ö–¶–ò–ô (9 —Ç–µ—Å—Ç–æ–≤)**

### **8.1 –°–û–ó–î–ê–ù–ò–ï –ò –û–ë–†–ê–ë–û–¢–ö–ê –ü–õ–ê–¢–ï–ñ–ï–ô**

#### **test_payment_receipt_creation()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ receipt –¥–ª—è –æ–ø–ª–∞—Ç—ã  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
service_price_datoshi = 1000000;  // 1 DAP
service_bytes = 1073741824;       // 1 GB
client_addr = valid_wallet_addr;
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–û–ó–î–ê–ù–ò–ï RECEIPT:
   ‚îú‚îÄ –≤—ã–∑–æ–≤ service->callbacks.create_receipt()
   ‚îú‚îÄ —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∑–∞ –æ–±—ä–µ–º –¥–∞–Ω–Ω—ã—Ö
   ‚îî‚îÄ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ receipt —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

2. –ü–†–û–í–ï–†–ö–ê RECEIPT:
   ‚îú‚îÄ receipt->service_uid –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
   ‚îú‚îÄ receipt->value_datoshi == 1000000
   ‚îú‚îÄ receipt->size_bytes == 1073741824
   ‚îú‚îÄ receipt->client_addr —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   ‚îî‚îÄ receipt->timestamp —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

3. –û–¢–ü–†–ê–í–ö–ê –ö–õ–ò–ï–ù–¢–£:
   ‚îú‚îÄ packet_type = RESPONSE_RECEIPT
   ‚îú‚îÄ receipt –≤ packet_data
   ‚îî‚îÄ –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∏ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
```

#### **test_payment_transaction_creation()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∏  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–õ–£–ß–ï–ù–ò–ï –ü–û–î–ü–ò–°–ò:
   ‚îú‚îÄ signed_receipt –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
   ‚îú‚îÄ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏
   ‚îî‚îÄ –ø–æ–¥–ø–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞

2. –°–û–ó–î–ê–ù–ò–ï –¢–†–ê–ù–ó–ê–ö–¶–ò–ò:
   ‚îú‚îÄ —Å–æ–∑–¥–∞–Ω–∏–µ conditional transaction
   ‚îú‚îÄ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —É—Å–ª–æ–≤–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   ‚îú‚îÄ tx_cond_hash –≤—ã—á–∏—Å–ª–µ–Ω
   ‚îî‚îÄ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞

3. –û–¢–ü–†–ê–í–ö–ê –í MEMPOOL:
   ‚îú‚îÄ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —Å–µ—Ç—å
   ‚îú‚îÄ tx_cond_hash —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ usage
   ‚îî‚îÄ –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
```

### **8.2 –ó–ê–ú–ï–ù–ê –ò–ó–†–ê–°–•–û–î–û–í–ê–ù–ù–´–• –¢–†–ê–ù–ó–ê–ö–¶–ò–ô**

#### **test_payment_tx_replacement()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–º–µ–Ω–∞ –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–æ–≤–æ–π  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ê–ö–¢–ò–í–ù–´–ô –°–ï–†–í–ò–°:
   ‚îú‚îÄ —Ç–µ–∫—É—â–∞—è tx –≤ ledger
   ‚îú‚îÄ —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ
   ‚îî‚îÄ –±–∞–ª–∞–Ω—Å —Ä–∞—Å—Ö–æ–¥—É–µ—Ç—Å—è

2. –ò–ó–†–ê–°–•–û–î–û–í–ê–ù–ò–ï TX:
   ‚îú‚îÄ –∏–º–∏—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤
   ‚îú‚îÄ service->callbacks.requested() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π receipt
   ‚îî‚îÄ –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –Ω–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è

3. –°–û–ó–î–ê–ù–ò–ï –ù–û–í–û–ô TX:
   ‚îú‚îÄ –Ω–æ–≤—ã–π receipt —Å–æ–∑–¥–∞–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
   ‚îú‚îÄ –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π receipt
   ‚îú‚îÄ –Ω–æ–≤–∞—è tx —Å–æ–∑–¥–∞–Ω–∞
   ‚îú‚îÄ —Å—Ç–∞—Ä–∞—è tx –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–∞—è
   ‚îî‚îÄ —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ grace –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–æ–≤–æ–π tx
```

---

## üíæ **–ö–ê–¢–ï–ì–û–†–ò–Ø 9: –¢–ï–°–¢–´ –°–û–•–†–ê–ù–ï–ù–ò–Ø –û–°–¢–ê–¢–ö–û–í (6 —Ç–µ—Å—Ç–æ–≤)**

### **9.1 –°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• USAGE**

#### **test_save_usage_to_gdb()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö usage –≤ Global DB  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
usage —Å –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
‚îú‚îÄ service_bytes_left = 500MB
‚îú‚îÄ service_bytes_used = 500MB  
‚îú‚îÄ ts_activated = current_time
‚îî‚îÄ active_session = true
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ü–û–î–ì–û–¢–û–í–ö–ê –î–ê–ù–ù–´–•:
   ‚îú‚îÄ usage —Å —á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º
   ‚îú‚îÄ –≤–∞–ª–∏–¥–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
   ‚îî‚îÄ –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è

2. –°–û–•–†–ê–ù–ï–ù–ò–ï:
   ‚îú‚îÄ –≤—ã–∑–æ–≤ s_set_usage_data_to_gdb(usage)
   ‚îú‚îÄ –¥–∞–Ω–Ω—ã–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è
   ‚îî‚îÄ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ GDB

3. –ü–†–û–í–ï–†–ö–ê:
   ‚îú‚îÄ –¥–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
   ‚îú‚îÄ –∫–ª—é—á –≤ GDB —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç usage_id
   ‚îú‚îÄ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
   ‚îî‚îÄ –º–µ—Ç—Ä–∏–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã —Ç–æ—á–Ω–æ
```

#### **test_restore_usage_from_gdb()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ usage –∏–∑ Global DB  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï:
   ‚îú‚îÄ –ø–æ–∏—Å–∫ –≤ GDB –ø–æ usage_id
   ‚îú‚îÄ –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   ‚îî‚îÄ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ usage –æ–±—ä–µ–∫—Ç–∞

2. –ü–†–û–í–ï–†–ö–ê –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–Ø:
   ‚îú‚îÄ service_bytes_left –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
   ‚îú‚îÄ service_bytes_used –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
   ‚îú‚îÄ timestamps –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   ‚îú‚îÄ —Å–æ—Å—Ç–æ—è–Ω–∏–µ usage –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   ‚îî‚îÄ —Å–µ—Å—Å–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∞
```

### **9.2 –£–ü–†–ê–í–õ–ï–ù–ò–ï –û–°–¢–ê–¢–ö–ê–ú–ò**

#### **test_usage_bytes_calculation()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞—Å—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤ —Å–µ—Ä–≤–∏—Å–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ù–ê–ß–ê–õ–¨–ù–û–ï –°–û–°–¢–û–Ø–ù–ò–ï:
   ‚îú‚îÄ –æ–ø–ª–∞—á–µ–Ω–æ 1GB (1073741824 bytes)
   ‚îú‚îÄ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ 0 bytes
   ‚îî‚îÄ service_bytes_left = 1073741824

2. –ü–û–¢–†–ï–ë–õ–ï–ù–ò–ï –°–ï–†–í–ò–°–ê:
   ‚îú‚îÄ –∏–º–∏—Ç–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è 256MB
   ‚îú‚îÄ –≤—ã–∑–æ–≤ update —Ñ—É–Ω–∫—Ü–∏–π
   ‚îî‚îÄ –ø–µ—Ä–µ—Å—á–µ—Ç –æ—Å—Ç–∞—Ç–∫–æ–≤

3. –ü–†–û–í–ï–†–ö–ê –†–ê–°–ß–ï–¢–û–í:
   ‚îú‚îÄ service_bytes_used = 268435456 (256MB)
   ‚îú‚îÄ service_bytes_left = 805306368 (768MB)
   ‚îú‚îÄ total = used + left == 1GB
   ‚îî‚îÄ –º–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã
```

---

## üö® **–ö–ê–¢–ï–ì–û–†–ò–Ø 10: –¢–ï–°–¢–´ –û–ë–†–ê–ë–û–¢–ö–ò –û–®–ò–ë–û–ö (11 —Ç–µ—Å—Ç–æ–≤)**

### **10.1 –û–®–ò–ë–ö–ò –ü–ê–ú–Ø–¢–ò**

#### **test_error_memory_allocation_failure()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±–æ–µ–≤ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ò–ú–ò–¢–ê–¶–ò–Ø –°–ë–û–Ø:
   ‚îú‚îÄ MOCK: malloc() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç NULL
   ‚îú‚îÄ –ø–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è usage –æ–±—ä–µ–∫—Ç–∞
   ‚îî‚îÄ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏

2. –ü–†–û–í–ï–†–ö–ê –û–ë–†–ê–ë–û–¢–ö–ò:
   ‚îú‚îÄ error_code = ALLOC_MEMORY_ERROR
   ‚îú‚îÄ error response –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫–ª–∏–µ–Ω—Ç—É
   ‚îú‚îÄ —Å–∏—Å—Ç–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π
   ‚îú‚îÄ –Ω–µ—Ç —É—Ç–µ—á–µ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤
   ‚îî‚îÄ —Å–µ—Å—Å–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
```

#### **test_error_grace_creation_failure()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–±–æ–π —Å–æ–∑–¥–∞–Ω–∏—è grace –æ–±—ä–µ–∫—Ç–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–ë–û–ô GRACE:
   ‚îú‚îÄ –ø–∞–º—è—Ç—å –¥–ª—è grace –Ω–µ –≤—ã–¥–µ–ª–∏–ª–∞—Å—å
   ‚îú‚îÄ grace creation failed
   ‚îî‚îÄ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏

2. –†–ï–ó–£–õ–¨–¢–ê–¢:
   ‚îú‚îÄ usage –ø–µ—Ä–µ–≤–µ–¥–µ–Ω –≤ ERROR —Å–æ—Å—Ç–æ—è–Ω–∏–µ
   ‚îú‚îÄ service –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   ‚îú‚îÄ error callback –≤—ã–∑–≤–∞–Ω
   ‚îî‚îÄ —Ä–µ—Å—É—Ä—Å—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã
```

### **10.2 –û–®–ò–ë–ö–ò –ü–†–û–¢–û–ö–û–õ–ê**

#### **test_error_invalid_packet_format()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ù–ï–ö–û–†–†–ï–ö–¢–ù–´–ô –ü–ê–ö–ï–¢:
   ‚îú‚îÄ packet —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
   ‚îú‚îÄ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   ‚îî‚îÄ –∏–ª–∏ –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π –≤–µ—Ä—Å–∏–µ–π

2. –û–ë–†–ê–ë–û–¢–ö–ê:
   ‚îú‚îÄ –ø–∞–∫–µ—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω
   ‚îú‚îÄ error response –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω
   ‚îú‚îÄ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è
   ‚îî‚îÄ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
```

#### **test_error_signature_validation_failure()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∏ receipt  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ù–ï–ö–û–†–†–ï–ö–¢–ù–ê–Ø –ü–û–î–ü–ò–°–¨:
   ‚îú‚îÄ signed_receipt —Å –Ω–µ–≤–µ—Ä–Ω–æ–π –ø–æ–¥–ø–∏—Å—å—é
   ‚îú‚îÄ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   ‚îî‚îÄ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏

2. –†–ï–ó–£–õ–¨–¢–ê–¢:
   ‚îú‚îÄ –ø–æ–¥–ø–∏—Å—å –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞
   ‚îú‚îÄ error_code = INVALID_SIGNATURE
   ‚îú‚îÄ –∫–ª–∏–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞
   ‚îú‚îÄ —Å–µ—Å—Å–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∞
   ‚îî‚îÄ –≤–æ–∑–º–æ–∂–Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞
```

---

## üîó **–ö–ê–¢–ï–ì–û–†–ò–Ø 11: –¢–ï–°–¢–´ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –° VPN (7 —Ç–µ—Å—Ç–æ–≤)**

### **11.1 VPN SERVICE CALLBACKS**

#### **test_vpn_service_integration()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å VPN —Å–µ—Ä–≤–∏—Å–æ–º —á–µ—Ä–µ–∑ callbacks  
**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```c
Mock VPN service —Å callbacks:
‚îú‚îÄ .create_receipt = mock_vpn_create_receipt
‚îú‚îÄ .start = mock_vpn_start  
‚îú‚îÄ .stop = mock_vpn_stop
‚îî‚îÄ .requested = mock_vpn_requested
```
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø VPN:
   ‚îú‚îÄ VPN service –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º–µ
   ‚îú‚îÄ callbacks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
   ‚îî‚îÄ —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –±–∏–ª–ª–∏–Ω–≥–∞

2. BILLING ‚Üí VPN INTERACTION:
   ‚îú‚îÄ –±–∏–ª–ª–∏–Ω–≥ –≤—ã–∑—ã–≤–∞–µ—Ç create_receipt
   ‚îú‚îÄ VPN –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π receipt
   ‚îú‚îÄ –±–∏–ª–ª–∏–Ω–≥ –≤—ã–∑—ã–≤–∞–µ—Ç start –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
   ‚îú‚îÄ VPN –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞–ø—É—Å–∫
   ‚îî‚îÄ —Å–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞

3. –ü–†–û–í–ï–†–ö–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò:
   ‚îú‚îÄ –≤—Å–µ callbacks –≤—ã–∑–≤–∞–Ω—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
   ‚îú‚îÄ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   ‚îú‚îÄ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
   ‚îî‚îÄ –æ—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
```

### **11.2 VPN –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø**

#### **test_vpn_configuration_loading()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ VPN —á–µ—Ä–µ–∑ –±–∏–ª–ª–∏–Ω–≥  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ó–ê–ì–†–£–ó–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò:
   ‚îú‚îÄ —á—Ç–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞
   ‚îú‚îÄ —Ü–µ–Ω–∞ –∑–∞ GB
   ‚îú‚îÄ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –ª–∏–º–∏—Ç—ã
   ‚îî‚îÄ grace period timeout

2. –ü–†–ò–ú–ï–ù–ï–ù–ò–ï –ö VPN:
   ‚îú‚îÄ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞–Ω—ã VPN —Å–µ—Ä–≤–∏—Å—É
   ‚îú‚îÄ –ª–∏–º–∏—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   ‚îú‚îÄ –±–∏–ª–ª–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø–æ–¥ VPN
   ‚îî‚îÄ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ
```

---

## üìä **–ö–ê–¢–ï–ì–û–†–ò–Ø 12: –¢–ï–°–¢–´ –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò (12 —Ç–µ—Å—Ç–æ–≤)**

### **12.1 THROUGHPUT BENCHMARKS**

#### **test_performance_concurrent_sessions()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏—è—Ö  
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```c
concurrent_sessions = 100;
operations_per_session = 1000;
target_ops_per_second = 10000;
```
**–ò–∑–º–µ—Ä–µ–Ω–∏—è:**
```
1. BASELINE MEMORY USAGE:
   ‚îú‚îÄ –ò–∑–º–µ—Ä–µ–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
   ‚îú‚îÄ –ó–∞–ø—É—Å–∫ Memory Manager
   ‚îú‚îÄ –°–æ–∑–¥–∞–Ω–∏–µ 10 "–Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö" —Å–µ—Å—Å–∏–π
   ‚îî‚îÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ baseline metrics

2. LOAD RAMP-UP:
   ‚îú‚îÄ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –¥–æ 100 —Å–µ—Å—Å–∏–π
   ‚îú‚îÄ –ò–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ
   ‚îú‚îÄ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
   ‚îî‚îÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã

3. PEAK LOAD TESTING:
   ‚îú‚îÄ 100 –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π
   ‚îú‚îÄ 1000 –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –∫–∞–∂–¥–æ–π —Å–µ—Å—Å–∏–∏
   ‚îú‚îÄ –ò–∑–º–µ—Ä–µ–Ω–∏–µ –æ–±—â–µ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
   ‚îî‚îÄ –ö–æ–Ω—Ç—Ä–æ–ª—å –æ—à–∏–±–æ–∫ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤

4. –†–ï–ó–£–õ–¨–¢–ê–¢–´:
   ‚îú‚îÄ ops/sec >= 10000 (–∫—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞)
   ‚îú‚îÄ error_rate < 1%
   ‚îú‚îÄ memory_usage —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ
   ‚îî‚îÄ response_time < 10ms average
```

#### **test_performance_memory_efficiency()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–ê–ú–Ø–¢–ò:
   ‚îú‚îÄ –Ω–∞—á–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ
   ‚îú‚îÄ —Å–æ–∑–¥–∞–Ω–∏–µ 1000 usage –æ–±—ä–µ–∫—Ç–æ–≤
   ‚îú‚îÄ —Å–æ–∑–¥–∞–Ω–∏–µ 1000 grace –æ–±—ä–µ–∫—Ç–æ–≤
   ‚îî‚îÄ –∏–∑–º–µ—Ä–µ–Ω–∏–µ peak memory

2. –û–ß–ò–°–¢–ö–ê:
   ‚îú‚îÄ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤
   ‚îú‚îÄ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
   ‚îî‚îÄ –∫–æ–Ω—Ç—Ä–æ–ª—å —É—Ç–µ—á–µ–∫

3. –ú–ï–¢–†–ò–ö–ò:
   ‚îú‚îÄ memory per usage object
   ‚îú‚îÄ memory per grace object
   ‚îú‚îÄ cleanup efficiency
   ‚îî‚îÄ fragmentation level
```

### **12.2 LATENCY MEASUREMENTS**

#### **test_performance_grace_creation_latency()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è grace –ø–µ—Ä–∏–æ–¥–æ–≤  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ò–ó–ú–ï–†–ï–ù–ò–ï LATENCY:
   ‚îú‚îÄ 1000 –∏—Ç–µ—Ä–∞—Ü–∏–π —Å–æ–∑–¥–∞–Ω–∏—è grace
   ‚îú‚îÄ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
   ‚îî‚îÄ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑

2. –ö–†–ò–¢–ï–†–ò–ò:
   ‚îú‚îÄ average_time < 1ms
   ‚îú‚îÄ p95_time < 5ms
   ‚îú‚îÄ p99_time < 10ms
   ‚îî‚îÄ max_time < 50ms
```

---

## üîó **–ö–ê–¢–ï–ì–û–†–ò–Ø 13: –ò–ù–¢–ï–ì–†–ê–¶–ò–û–ù–ù–´–ï –ò E2E –¢–ï–°–¢–´ (15 —Ç–µ—Å—Ç–æ–≤)**

### **13.1 –ü–û–õ–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò –°–ï–†–í–ò–°–ê**

#### **test_e2e_full_paid_service_flow()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–¢–ê–†–¢ –°–ï–†–í–ò–°–ê:
   ‚îú‚îÄ –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç REQUEST –ø–∞–∫–µ—Ç —Å tx_cond_hash
   ‚îú‚îÄ –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç usage (IDLE ‚Üí IDLE)
   ‚îú‚îÄ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç —á–µ—Ä–µ–∑ Usage Manager
   ‚îî‚îÄ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤ mempool/ledger

2. –û–ë–†–ê–ë–û–¢–ö–ê –ü–ï–†–í–û–ì–û –ü–õ–ê–¢–ï–ñ–ê:
   ‚îú‚îÄ –ï—Å–ª–∏ tx –ù–ï –≤ ledger ‚Üí IDLE ‚Üí GRACE (–Ω–∞—á–∞–ª—å–Ω—ã–π grace)
   ‚îÇ  ‚îú‚îÄ –°–æ–∑–¥–∞–µ—Ç—Å—è grace period —á–µ—Ä–µ–∑ Usage Manager
   ‚îÇ  ‚îú‚îÄ –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä grace
   ‚îÇ  ‚îî‚îÄ –û–∂–∏–¥–∞–Ω–∏–µ –ø–æ—è–≤–ª–µ–Ω–∏—è tx –≤ ledger
   ‚îú‚îÄ –ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ tx –≤ ledger:
   ‚îÇ  ‚îú‚îÄ Grace –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   ‚îÇ  ‚îú‚îÄ GRACE ‚Üí NORMAL –ø–µ—Ä–µ—Ö–æ–¥
   ‚îÇ  ‚îú‚îÄ Service start callback –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
   ‚îÇ  ‚îî‚îÄ –°–µ—Ä–≤–∏—Å –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è

3. –ù–û–†–ú–ê–õ–¨–ù–ê–Ø –†–ê–ë–û–¢–ê:
   ‚îú‚îÄ –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ NORMAL —Ä–µ–∂–∏–º–µ
   ‚îú‚îÄ –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ bytes –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è
   ‚îú‚îÄ –û—Å—Ç–∞—Ç–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
   ‚îî‚îÄ –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ GDB

4. –ü–û–í–¢–û–†–ù–ê–Ø –û–ü–õ–ê–¢–ê:
   ‚îú‚îÄ –ü—Ä–∏ –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∏–∏ ~80% ‚Üí –Ω–æ–≤—ã–π receipt
   ‚îú‚îÄ –ö–ª–∏–µ–Ω—Ç –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π receipt
   ‚îú‚îÄ –°–æ–∑–¥–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è
   ‚îú‚îÄ NORMAL ‚Üí GRACE (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π grace)
   ‚îî‚îÄ –°–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É

5. –ó–ê–í–ï–†–®–ï–ù–ò–ï –°–ï–†–í–ò–°–ê:
   ‚îú‚îÄ –ö–ª–∏–µ–Ω—Ç –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è
   ‚îú‚îÄ –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ usage –¥–∞–Ω–Ω—ã—Ö
   ‚îú‚îÄ –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ —á–µ—Ä–µ–∑ Usage Manager
   ‚îî‚îÄ –°–µ—Ä–≤–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

#### **test_e2e_grace_timeout_recovery()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞ grace  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –°–û–ó–î–ê–ù–ò–ï GRACE –°–¶–ï–ù–ê–†–ò–Ø:
   ‚îú‚îÄ –ê–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–Ω–æ–π tx
   ‚îú‚îÄ –ù–æ–≤—ã–π –ø–ª–∞—Ç–µ–∂ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
   ‚îú‚îÄ Tx –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞, –Ω–æ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞
   ‚îî‚îÄ Grace –ø–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω

2. –ò–ú–ò–¢–ê–¶–ò–Ø –î–û–õ–ì–û–ì–û –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø:
   ‚îú‚îÄ Grace —Ç–∞–π–º–µ—Ä –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ –∏—Å—Ç–µ—á–µ–Ω–∏—é
   ‚îú‚îÄ Tx –≤—Å–µ –µ—â–µ –Ω–µ –≤ ledger
   ‚îî‚îÄ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∫ —Ç–∞–π–º–∞—É—Ç—É

3. –¢–ê–ô–ú–ê–£–¢ GRACE:
   ‚îú‚îÄ Grace —Ç–∞–π–º–µ—Ä —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
   ‚îú‚îÄ Tx –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ ledger
   ‚îú‚îÄ –ü–æ–≤—Ç–æ—Ä–Ω—ã–π grace –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π
   ‚îî‚îÄ –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞

4. –ü–û–ó–î–ù–ï–ï –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–ï:
   ‚îú‚îÄ Tx –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ ledger –ø–æ—Å–ª–µ —Ç–∞–π–º–∞—É—Ç–∞
   ‚îú‚îÄ Callback —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
   ‚îú‚îÄ –ë–∞–ª–∞–Ω—Å –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç—Å—è
   ‚îî‚îÄ –ù–æ–≤—ã–π grace —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

5. –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –°–ï–†–í–ò–°–ê:
   ‚îú‚îÄ –°–µ—Ä–≤–∏—Å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É
   ‚îú‚îÄ –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è
   ‚îú‚îÄ –ú–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è
   ‚îî‚îÄ –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
```

#### **test_e2e_multi_client_fairness()**
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤  
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
```
1. –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï –ö–õ–ò–ï–ù–¢–´:
   ‚îú‚îÄ 10 –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
   ‚îú‚îÄ –ö–∞–∂–¥—ã–π —Å —Ä–∞–∑–Ω—ã–º–∏ tx_cond_hash
   ‚îú‚îÄ –†–∞–∑–Ω—ã–µ –æ–±—ä–µ–º—ã –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
   ‚îî‚îÄ –†–∞–∑–ª–∏—á–Ω—ã–µ grace timeouts

2. –ü–ê–†–ê–õ–õ–ï–õ–¨–ù–ê–Ø –û–ë–†–ê–ë–û–¢–ö–ê:
   ‚îú‚îÄ –í—Å–µ —Å–µ—Å—Å–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
   ‚îú‚îÄ Grace –ø–µ—Ä–∏–æ–¥—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã
   ‚îú‚îÄ –†–µ—Å—É—Ä—Å—ã –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è
   ‚îî‚îÄ Isolation –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

3. –ü–†–û–í–ï–†–ö–ê FAIRNESS:
   ‚îú‚îÄ –ö–∞–∂–¥—ã–π –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –∑–∞—è–≤–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å
   ‚îú‚îÄ –ù–µ—Ç –≤–ª–∏—è–Ω–∏—è –æ–¥–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ –¥—Ä—É–≥–æ–≥–æ
   ‚îú‚îÄ Grace timeouts –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã
   ‚îú‚îÄ –ü–∞–º—è—Ç—å –∏ —Ä–µ—Å—É—Ä—Å—ã –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã
   ‚îî‚îÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–∞
```

---

## üìä **–°–£–ú–ú–ê–†–ù–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê –¢–ï–°–¢–û–í**

| **–ö–∞—Ç–µ–≥–æ—Ä–∏—è** | **–ë—ã—Å—Ç—Ä—ã–µ** | **–ò–Ω—Ç–µ–≥—Ä.** | **–°—Ç—Ä–µ—Å—Å** | **–ü—Ä–æ–∏–∑–≤.** | **–î–æ–ª–≥–∏–µ** | **–í—Å–µ–≥–æ** |
|---------------|-------------|-------------|------------|-------------|-------------|-----------|
| **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** | 5 | 0 | 0 | 0 | 0 | **5** |
| **Memory Manager** | 8 | 0 | 2 | 1 | 0 | **11** |
| **Timer Utils** | 6 | 0 | 1 | 1 | 0 | **8** |
| **Usage Manager** | 9 | 0 | 2 | 1 | 0 | **12** |
| **–°–æ—Å—Ç–æ—è–Ω–∏—è** | 8 | 4 | 0 | 0 | 0 | **12** |
| **–ü–∞–∫–µ—Ç—ã** | 6 | 2 | 0 | 0 | 0 | **8** |
| **Grace Periods** | 4 | 4 | 2 | 0 | 0 | **10** |
| **–ü–ª–∞—Ç–µ–∂–∏** | 5 | 4 | 0 | 0 | 0 | **9** |
| **–û—Å—Ç–∞—Ç–∫–∏** | 4 | 2 | 0 | 0 | 0 | **6** |
| **–û—à–∏–±–∫–∏** | 8 | 3 | 0 | 0 | 0 | **11** |
| **VPN –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | 3 | 4 | 0 | 0 | 0 | **7** |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | 0 | 0 | 8 | 12 | 0 | **20** |
| **E2E –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | 0 | 5 | 0 | 0 | 8 | **13** |
| **–ò–¢–û–ì–û** | **66** | **28** | **15** | **15** | **8** | **132** |

---

## ‚úÖ **–ö–†–ò–¢–ï–†–ò–ò –í–ê–õ–ò–î–ê–¶–ò–ò –¢–ï–°–¢–û–í**

### **üéØ –ü–û–ö–†–´–¢–ò–ï –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–ò:**
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ API —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ–∫—Ä—ã—Ç—ã
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã –æ—à–∏–±–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- ‚úÖ –í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã

### **‚ö° –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨:**
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã: < 100ms –∫–∞–∂–¥—ã–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ: < 1s –∫–∞–∂–¥—ã–π
- ‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –∑–∞ < 2 –º–∏–Ω—É—Ç—ã

### **üõ°Ô∏è –ù–ê–î–ï–ñ–ù–û–°–¢–¨:**
- ‚úÖ –î–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ Mock –æ–±—ä–µ–∫—Ç—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

---

**üìù –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï:** –î–∞–Ω–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞—Å–ø–µ–∫—Ç—ã –±–∏–ª–ª–∏–Ω–≥–æ–≤–æ–≥–æ –º–æ–¥—É–ª—è —Å –ø–æ–ª–Ω–æ–π –∏–∑–æ–ª—è—Ü–∏–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
